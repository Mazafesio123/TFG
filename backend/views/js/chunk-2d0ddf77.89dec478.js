(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddf77"],{8449:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{app:"",right:"",temporary:"",width:"512"},scopedSlots:e._u([{key:"append",fn:function(){return[n("div",{staticClass:"ma-4"},[n("v-btn",{staticClass:"my-1",attrs:{color:"secondary",outlined:"",block:""},on:{click:function(t){e.newUser=!0}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-account-plus")]),e._v(" Crear cuenta de usuario ")],1),n("v-btn",{staticClass:"my-1",attrs:{to:"/logout",color:"error",outlined:"",block:""}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-logout")]),e._v(" Cerrar sesi√≥n ")],1)],1)]},proxy:!0}]),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("v-card-title",[e._v("Perfil")]),n("div",[n("v-img",{staticClass:"mx-auto mt-4",staticStyle:{"max-width":"200px"},attrs:{src:e.baseUrl+"/avatars/"+e.$store.getters.getDecodedToken.img,contain:""}},[n("v-btn",{attrs:{fab:"",color:"secondary",elevation:1},on:{click:e.openFileInput}},[n("v-icon",[e._v("mdi-pencil")])],1)],1),n("v-file-input",{ref:"fileInput",staticClass:"d-none",attrs:{label:"Foto de perfil",accept:"image/*",disabled:!!e.img},on:{change:function(){e.crop=null!=e.img||null,e.croppedImage=e.img}},model:{value:e.img,callback:function(t){e.img=t},expression:"img"}}),e.img?n("img-cropper",{key:e.img.name,on:{cancel:function(t){e.img=null}},model:{value:e.croppedImage,callback:function(t){e.croppedImage=t},expression:"croppedImage"}}):e._e(),n("v-text-field",{staticClass:"mx-4 mt-2",attrs:{outlined:"",label:"Nombre de usuario",rules:[function(e){return!!e||"Este campo es obligatorio"}]},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}}),n("div",{staticClass:"d-flex mx-4"},[n("v-spacer"),n("v-btn",{attrs:{color:"secondary"},on:{click:e.saveProfile}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Guardar cambios ")],1)],1)],1),n("v-dialog",{attrs:{"max-width":"800px",width:"100%",persistent:""},model:{value:e.newUser,callback:function(t){e.newUser=t},expression:"newUser"}},[n("new-user",{on:{cancel:function(t){e.newUser=!1}}})],1)],1)},o=[],r=n("1da1"),i=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),{components:{NewUser:function(){return Promise.resolve().then(n.bind(null,"c7c5"))},ImgCropper:function(){return Promise.all([n.e("chunk-9e9c9b90"),n.e("chunk-1d52a454")]).then(n.bind(null,"b61f"))}},props:{value:Boolean},data:function(){return{nombre:this.$store.getters.getDecodedToken.username,newUser:!1,crop:null,img:null,croppedImage:null,baseUrl:"http://localhost"}},computed:{active:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{openFileInput:function(){this.$refs.fileInput.$el.querySelector("input").click()},saveProfile:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.croppedImage){t.next=4;break}return t.next=3,fetch(e.croppedImage).then((function(e){return e.blob()}));case 3:n=t.sent;case 4:a=new FormData,a.append("name",e.nombre),n&&a.append("img",n,"avatar.png"),axios({method:"POST",url:"".concat("http://localhost/api","/save_profile"),data:a}).then((function(t){e.$store.dispatch("logout").then((function(){return e.$router.push("/login")}))}));case 8:case"end":return t.stop()}}),t)})))()}}}),c=i,l=n("2877"),s=n("6544"),u=n.n(s),d=n("8336"),p=n("99d9"),m=n("169a"),v=n("23a7"),f=n("132d"),g=n("adda"),b=n("f774"),h=n("2fa4"),w=n("8654"),k=Object(l["a"])(c,a,o,!1,null,null,null);t["default"]=k.exports;u()(k,{VBtn:d["a"],VCardTitle:p["d"],VDialog:m["a"],VFileInput:v["a"],VIcon:f["a"],VImg:g["a"],VNavigationDrawer:b["a"],VSpacer:h["a"],VTextField:w["a"]})}}]);
//# sourceMappingURL=chunk-2d0ddf77.89dec478.js.map